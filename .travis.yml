language: python
sudo: false
cache: pip

matrix:
  include:
    - os: linux
      python: 3.6
      language: python

install:
  - python3 -m pip install --upgrade pip
  - python3 -m pip install pyqt5 pytest pyinstaller

script:
  - python3 -m pytest -vv test_kalkulacka/
  - pyinstaller __main__.py -n kalkulacka-app
      --exclude-module tkinter
      --add-data kalkulacka:kalkulacka
      -F -w

deploy:
    provider: releases
    api_key:
        secure: Kuql1G1kMS5c4rW+R7dYuP6g6jlEM4rj3L3tSXAYQWqPNZE2/rNU3vZ7OdXTK8B6EHoiFtuWsaYET1VQXKLeNPtCFmVrSSji8k4xCacR1a5mDBRjKvFBkw6SlfD3ZwKs67MHDA0wQBEBajvXrkVMTYVhLgEPJ3IvIrTyMNJv9iAraV08B4yRKPcd93WpZEuZphYe8ith64/0KMAsWf840XhYSig9qOWqRKgX2BkmSPkBspUwBRMUsCgwxYMQ8hcioAcXYa96mDSexUZ5MzrQMJ3KLA6VYQ3OA9rlpPVU9Zay60Y2gaVpfmzuX/81r+yPFsvEnDZ4cFVKVTmQk03+hOd1CCqYMWVXnB18CVHBNcNXxYbHk2kzYTM/eupoQDmYI4vkupPrJ9vXBewc3UIHZN1wW/iLNdtA4xEoF9Yj9SDBFCCCta8a76s1FaxC8X4yFDAaoiWCbKj+a0SLzjs06m3Ed8HohNWbFx2crEIKkd78+Y2i4MF9edACAhnzSQYOVMd278CM5W/O7OoXL5DGxlbxiCZ9E1Mey/SpJ2qrE65UhU1J34TctY8naOTZ5X8rsbk3wxT+M3vH1CmbpdBtrp7dJQQttLWWshqUWzfZr4nVrtZ2JQhNG4Mqb39wL8/I2JCcQmdsXd9uAbNaFRgDjxmFgQr2QfsMfR+DzMa/og4=
    file_glob: true
    file: dist/*
    skip_cleanup: true
    on:
        tags: true
