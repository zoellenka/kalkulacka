language: python
sudo: false
cache: pip

matrix:
  include:
    - os: linux
      python: 3.6
      language: python

install:
  - python3 -m pip install --upgrade pip
  - python3 -m pip install pyglet pytest pyinstaller

script:
  - python3 -m pytest -vv test_kalkulacka/
  - pyinstaller __main__.py -n kalkulacka-app
      --exclude-module tkinter
      --add-data dama/resources:dama/resources
      -F -w

deploy:
    provider: releases
    api_key:
        secure: KhYlUHTLwhBZom0mUnSA7S2XbNXC7eovs3OBsWCIvwi0aFNV/43PKp9WZ9ntsAbw4DYPG6OWMa0PdBwDGgCFmjN1A5HBQYCqZB0/P3SJk/ty5gR7x44iDETDVNDTZby54USLQautjlUvBIwo6j+eIlDzyqNzELXv+pw5hTxSA3uhWGdw/cFM0rugr8ksCDMQpt+w0w2iqzUTFlqfjbDodr/+Q0NQizbG3x9C7eFRDJoEZXdBMyOnf947wCr1MsyO1Wp+mJHPDgByzPimfij0fME2ep51EmTybxVPEteuCCeRZGmvBEy3sivB1BC3uQlnCGzDvdsJaHQLD8TF84w3zSAm3lYKdIO6U1w9VUxh65ce33qMJ8sd2bvheo2/OoAZGKkhqY5vLosLltYpiQhFqOtLwcWGcdDtY5tXsjqNsLeic79TvDhq/xEXYsBv7DvX5DGcLayt/8iULFW5wjGstRRoXY7A39oE/R6LsKUQSbOGIYMipWRTRgRiwsMH2Z9SGOvkPbz0gSZ/AKGaDBbXcsGMtEP0mrKZMno4GZ5Ia1iWvxTnQEfr03HoQrKt3fypH29YBBU+wMoUDJrunGlu8E98g/wj3Fle6fwvjBwF4c9wugyU2zBM4r2sBkpVJCtgUCvkXMijCJhrFrzfDfFyj8yU4UUpnnY5L/6aEbbuPgA=
    file_glob: true
    file: dist/*
    skip_cleanup: true
    on:
        tags: true
